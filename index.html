<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="Amberkira">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Amberkira">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Amberkira">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> Amberkira </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Amberkira</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/20/apt-memo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/11/20/apt-memo/" itemprop="url">
                  apt_memo
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-20T11:16:24+08:00">
                2017-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="apt填坑备忘Memo"><a href="#apt填坑备忘Memo" class="headerlink" title="apt填坑备忘Memo"></a>apt填坑备忘Memo</h1><p>文章开头第一段我打算的是交代下行文多背景目的以及最终达到的效果，所以没错这是一个总分总形式的article。最初就是想了解下annotation，哪知道最后扯出那么多路子，从开始看apt有关的内容到开始写demo大概花了2天时间，下面我会把学习路线先总结下，然后把我觉得重要的给备份一次，最后实践部分是通过一个简单的apt来实现登陆注册等表单的验证功能的demo。</p>
<h2 id="学习路线"><a href="#学习路线" class="headerlink" title="学习路线"></a>学习路线</h2><p>annotation–自定义annotation–动态代理ProxyInstance–AbstractProcessor–ButterKnife–JavaPoet–ClassLoader</p>
<p>注意这不是一个严格的时序图。我在里面可能来回跳了好几次。</p>
<p>说到annotation，最基础的就是我们每次重写超类方法时候的@override等基础annotation了，基础的知识如：Retation，Target，inherated等就[]点这吧。<br>然后讲到自定义annotation的时候，我们都会想到最出名的Butterknife，当然各个blog也都像模像样的给大家用reflect，动态代理，RetationPolicy.Runtime这些最原始的条件下写了一些demo，当然早起的butterknife确实也是这样的，后期为了节约开销，便将RetationPolicy更至于Class了，通过在第一次将代码编译至class文件时写入相关代码，不再运行时编译，节约了大量系统开销，当然节省时间，你要真想不起来了可以[]点这</p>
<p>之后abstractProcessor，javapoet，classloader都是围绕着butterknife的工作原理展开的。首先abstractprocessor是google为了在class阶段翻译代码所提供的一个处理类；javapoet是jw大神自己写的一个能动态生成java文件的库，classloader是将我们通过注解生成的类于我们目标类关联起来的桥梁！生成的新的类如何加载？那当然是classloader啦！</p>
<p>通过整理butterknife代码我们很清楚实现的顺序就是首先通过继承了ap的processor类的process方法扫描获取目标类中所有跟我们自定义annotation有关的类，方法，成员变量等，然后通过javapoet为他们生成一个java类封装相应的实现，最后在运行时目标类会通过我们提供的方法用classloader加载我们生成的新类！之后我们结合bk源码以及demo的反编译后的拿到的class文件来说明。</p>
<h2 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h2><p>整个实现逻辑在理解上来说是很顺畅简单的，但是我自己觉得最难的其实就是abstractprocessor中的各个type类。这方面讲解的文章很少，大部分都是还原bk源码部分就完事儿了。</p>
<h3 id="AbstractProcessor"><a href="#AbstractProcessor" class="headerlink" title="AbstractProcessor"></a>AbstractProcessor</h3><p>首先我们从该类的方法入手看看</p>
<p>private Elements elementUtils;<br>private Types typeUtils;<br>private Messager message;<br>private Filer filer;//这几个是下面要实例化的几个帮助类</p>
<p>@Override<br>public synchronized void init(ProcessingEnvironment processingEnv)     {<br>super.init(processingEnv);</p>
<p>//ProcessingEnvironment 为我们提供了几个有用的帮助类，一般都可以在<br>//init方法中对这几个帮助类进行初始化；</p>
<p>elementUtils = processingEnvironment.getElementUtils();<br>typeUtils = processingEnvironment.getTypeUtils();<br>filer = processingEnvironment.getFiler();<br>}</p>
<p>//获取支持的annotation类<br>@Override<br>public Set<string> getSupportedAnnotationTypes() {<br>return null;<br>}</string></p>
<p>//制定java版本<br>@Override<br>public SourceVersion getSupportedSourceVersion() {<br>return SourceVersion.latestSupported();<br>}</p>
<p>／／在这里扫描和处理你的注解并生成Java代码，信息都在参数RoundEnvironment里    @Override<br>public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {<br>return true;<br>}</p>
<h3 id="了解你获得的元素"><a href="#了解你获得的元素" class="headerlink" title="了解你获得的元素"></a>了解你获得的元素</h3><p>刚刚我们提到process方法中的RoundEnvironment会为我们提供扫描之后信息，那么怎么获取怎么使用我们先不着急，现在需要知其所以然了。</p>
<p>你可能已经知道了通过roundEnv.getElementsAnnotatedWith(&lt;? extends Annotation.class&gt;) 可以获得具有该注解类的Set&lt;? extends Element&gt;；那么这个element就是我们重点关注的对象了。</p>
<h4 id="Element"><a href="#Element" class="headerlink" title="Element"></a>Element</h4><p>在整个apt中，所有通过注解获取到的元素都将用这个方式等待我们的处理，既然是注解获得的，所以他的大部分子类跟当初注解时候的元注解Target其实是对应的；</p>
<p>下面是<br>Element的官方注释：</p>
<p>Represents a program element such as a package, class, or method.<br>Each element represents a static, language-level construct (and not, for example, a runtime construct of the virtual machine).<br>代表一个包，类或者方法等；</p>
<p>Element的子类有：</p>
<p>ExecutableElement</p>
<p>表示某个类或接口的方法、构造方法或初始化程序（静态或实例），包括注释类型元素。</p>
<p>对应@Target(ElementType.METHOD) @Target(ElementType.CONSTRUCTOR)</p>
<p>PackageElement;</p>
<p>表示一个包程序元素。提供对有关包及其成员的信息访问。</p>
<p>对应@Target(ElementType.PACKAGE)</p>
<p>TypeElement;</p>
<p>表示一个类或接口程序元素。提供对有关类型及其成员的信息访问。</p>
<p>对应@Target(ElementType.TYPE)</p>
<p>注意：枚举类型是一种类，而注解类型是一种接口。</p>
<p>TypeParameterElement;</p>
<p>表示一般类、接口、方法或构造方法元素的类型参数。</p>
<p>对应@Target(ElementType.PARAMETER)</p>
<p>VariableElement;</p>
<p>表示一个字段、enum常量、方法或构造方法参数、局部变量或异常参数。</p>
<p>对应@Target(ElementType.LOCAL_VARIABLE)</p>
<p>记清楚了这个对应关系，我们之后就能根据自定义注解来有的放矢的cast element了！<br>但是这一步我们通过看bk的源码发现还是头大！怎么办？慢慢梳理！首先我们从我们最需要的type以及method入手！推荐这个：<a href="http://blog.csdn.net/u010405231/article/details/52210401" target="_blank" rel="external">http://blog.csdn.net/u010405231/article/details/52210401</a></p>
<p>总结一下的就是不管我们要通过注解获取到任何类型的元素，我们都要明白自己之后要做的事情是：1.它类型是什么 2.它包名是什么 3.它的类名方法名成员名变量名是什么？<br>这3件事情我们一步步解决；<br>1.它的类型：这个很简单了通过我们注解Target时候我们就有了大致的方向，当然有时候target可能是复数形式的时候，我们可以通过Element的TypeMirror的TypeKind作为判断:</p>
<p>TypeMirror mirror = ele.asType();<br>if (mirror.getKind() == TypeKind.TYPEVAR); //成员变量<br>if (mirror.getKind() == TypeKind.EXECUTABLE);／／方法或构造函数<br>if (mirror.getKind() == TypeKind.VOID);／／空成员<br>if (mirror.getKind() == TypeKind.DECLARED);／／Class或者Interface</p>
<p>TypeKind还有很多比如package，array，boolean等；<br>需要细说的就是如果是是typevar的话可以通过下面的代码获取到具体的type<br>TypeVariable variable = (TypeVariable)typeMirror;<br>typeMirror = variable.getUpperBound();</p>
<p>2.它的包名：经过第一步明确类型之后的Element肯定是能cast成我们前面所说的几类Element之一，这时候我们获取包名就特别轻松愉快了；<br>TypeElement typeElement = (TypeElement) ele.getEnclosingElement();<br>Name packageName = elementUtils.getPackageOf(typeElement).getQualifiedName();//这里的elementUtils就是我们在init中通过processingEnv初始化的帮助类，他能帮助我们获取所有element所在包的全包名以及包名（getSimpleName）<br>String package = packageName.toString();</p>
<p>3.它的类名方法名成员名变量名是什么：这个问题首先是要建立在1这个问题上，我们做成表格的话就是。 成员变量—TypeElement—类名<br>Class—TypeElement—类名<br>Method—ExecutableElement—方法名，参数类型，参数名<br>Parameter–VariableElement—参数类型，参数名</p>
<p>接着我们分别看看应该怎么获取吧</p>
<p>PackageElement packageElement = elementUtils.getPackageOf(typeElement);<br>String packageName = packageElement.getQualifiedName().toString();<br>String qulifiedName = typeElement.getQualifiedName().toString();<br>String simpleName = typeElement.getSimpleName().toString();<br>对一般成员也就是TypeElement我们分别获取了包名，类全名，类名，</p>
<p>接口方法类通过分别两次强转来获取类名以及方法名<br>ExecutableElement executableElement = (ExecutableElement) element;</p>
<p>//非对应的Element，通过getEnclosingElement转换获取<br>TypeElement classElement = (TypeElement) element<br>.getEnclosingElement();</p>
<p>//全类名<br>String fullClassName = classElement.getQualifiedName().toString();<br>//类名<br>String className = classElement.getSimpleName().toString();<br>//包名<br>String packageName = packageElement.getQualifiedName().toString();<br>//方法名<br>String methodName = executableElement.getSimpleName().toString();</p>
<p>//取得方法参数列表<br>List&lt;? extends VariableElement&gt; methodParameters = executableElement.getParameters();<br>//参数类型列表<br>List<string> types = new ArrayList&lt;&gt;();<br>for (VariableElement variableElement : methodParameters) {<br>TypeMirror methodParameterType = variableElement.asType();<br>if (methodParameterType instanceof TypeVariable) {<br>TypeVariable typeVariable = (TypeVariable) methodParameterType;<br>methodParameterType = typeVariable.getUpperBound();</string></p>
<p>}<br>//参数名<br>String parameterName = variableElement.getSimpleName().toString();<br>//参数类型<br>String parameteKind = methodParameterType.toString();<br>types.add(methodParameterType.toString());<br>}</p>
<p>搞清楚了我们的注解获取的对象是谁来自哪里 那么下一步就是要通过javapoet来生产可利用的class文件咯<br>关于javapoet github上readme把基本所有用法都说的比较清楚了<br>我这里就比较分析一下里面占位符各自间的区别吧<br>$L:for Literals 就是将替代的文本带入到原文占位符中It accepts $L to emit a literal value in the output. This works just like Formatter’s %s<br>$S:for string 将替代文本加上了引号带入原文When emitting code that includes string literals, we can use $S to emit a string, complete with wrapping quotation marks and escaping<br>$T:for Type 指代的不是文本而是一个类名 they make our code easier to understand. And JavaPoet is on board. It has rich built-in support for types, including automatic generation of import statements. Just use $T to reference types<br>$N:for Name 指代的同样由javapoet生产的类名 Generated code is often self-referential. Use $N to refer to another generated declaration by its name.</p>
<p>最后我们的demo我也不知道啥时候能上来跟大家见面= =谢谢</p>
<p>我们需要生成的类：<br>public class TemplateClass {</p>
<p>public TemplateClass(final Activity activity, final String Regx, String targetName, String methodName, int id) {<br>activity.targetName = (EditText)activity.findViewById(id);<br>activity.targetView.setOnFocusChangeListener(new View.OnFocusChangeListener() {<br>@Override<br>public void onFocusChange(View v, boolean hasFocus) {<br>if (!hasFocus){<br>String tex = activity.targetName.getText().toString;<br>boolean isValid = Utils.regx(tex,Regx);<br>if (!isValid){<br>activity.methodName();<br>}<br>}<br>}<br>});</p>
<p>}<br>}</p>
<p>正则工具类:<br>public static boolean regx(String target,String reg){<br>Pattern pattern = Pattern.compile(reg);<br>Matcher matcher = pattern.matcher(target);<br>return matcher.matches();<br>}</p>
<p>最low的生成方法：  private static void output() {<br>MethodSpec c = MethodSpec.constructorBuilder().addParameter(ACTIVITY,”activity”)<br>.addParameter(VIEW,”view”)<br>.addParameter(String.class,”regx”)<br>.addParameter(String.class,”targetName”)<br>.addParameter(String.class,”method”)<br>.addParameter(int.class,”id”)<br>.addStatement(“activity.targetName = (EditText)activity.findViewById(id)”)<br>.beginControlFlow(“activity.targetView.setOnFocusChangeListener(new View.OnFocusChangeListener()”)<br>.addAnnotation(Override.class)<br>.beginControlFlow(“public void onFocusChange(View v, boolean hasFocus)”)<br>.beginControlFlow(“if(!hasFocus)”)<br>.addStatement(“String tex = activity.targetName.getText().toString;”)<br>.addStatement(“boolean isValid = Utils.regx(tex,Regx)”)<br>.beginControlFlow(“if (!isValid)”)<br>.addStatement(“activity.methodName()”)<br>.endControlFlow()<br>.endControlFlow()<br>.endControlFlow()<br>.endControlFlow().build();<br>TypeSpec typeSpec = TypeSpec.classBuilder(“HelloWorld”)//HelloWorld是类名<br>.addMethod(c)  //在类中添加方法<br>.build();</p>
<p>JavaFile javaFile = JavaFile.builder(“com.amber.lib”,typeSpec).build();<br>try {<br>javaFile.writeTo(System.out);<br>} catch (IOException e) {<br>e.printStackTrace();<br>}<br>}</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/01/auto-fill/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/01/auto-fill/" itemprop="url">
                  auto_fill
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-01T09:30:35+08:00">
                2017-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="AutoFill-Framework"><a href="#AutoFill-Framework" class="headerlink" title="AutoFill Framework"></a>AutoFill Framework</h1><p>我们一直设计的app都有自动填充的功能，不过怎么样安全持有用户这部分数据却是很敏感的事情，现在google在android O 中提供了系统级别的自动填充框架以供我们使用，这对用户以及我们开发人员来说都是好事，google推出这个框架的主要目的还是为了减少用户填表时间，以及最小化用户的输入错误带来的糟糕体验。</p>
<h2 id="提前准备"><a href="#提前准备" class="headerlink" title="提前准备"></a>提前准备</h2><p>因为整个autofill框架是以service形式存在的，所以用户手机必须先行设置，设置路径是： <strong>Settings &gt; System &gt; Languages &amp; input &gt; Advanced &gt; Input assistance &gt; Autofill service</strong> 整个服务需要用户提前授权。<br><a href="https://github.com/googlesamples/android-AutofillFramework/blob/master/README.md" target="_blank" rel="external">autofill sample</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/27/NestedScrollandBehavior-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/27/NestedScrollandBehavior-1/" itemprop="url">
                  NestedScrollandBehavior
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-27T17:03:01+08:00">
                2017-07-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> 从很多人写的博客都看到了大家对这个layout的使用以及部分不太全的讲解，所以还是从官网上学习这个布局应该是最快的 </p>
<h2 id="CoordinatorLayout定义"><a href="#CoordinatorLayout定义" class="headerlink" title="CoordinatorLayout定义"></a>CoordinatorLayout定义</h2><blockquote>
<p>CoordinatorLayout is a super-powered FrameLayout.</p>
<p>CoordinatorLayout is intended for two primary use cases:</p>
<p>As a top-level application decor or chrome layout.</p>
<p>As a container for a specific interaction with one or more child views.</p>
<p>By specifying Behaviors for child views of a CoordinatorLayout you can provide many different interactions within a single parent and those views can also interact with one another. View classes can specify a default behavior when used as a child of a CoordinatorLayout using the DefaultBehavior annotation.</p>
<p>Behaviors may be used to implement a variety of interactions and additional layout modifications ranging from sliding drawers and panels to swipe-dismissable elements and buttons that stick to other elements as they move and animate.</p>
<p>Children of a CoordinatorLayout may have an anchor. This view id must correspond to an arbitrary descendant of the CoordinatorLayout, but it may not be the anchored child itself or a descendant of the anchored child. This can be used to place floating views relative to other arbitrary content panes.</p>
<p>Children can specify insetEdge to describe how the view insets the CoordinatorLayout. Any child views which are set to dodge the same inset edges by dodgeInsetEdges will be moved appropriately so that the views do not overlap.</p>
</blockquote>
<p>作为最基础的layout，他的定义很长哈，我们慢慢解释一下，首先我们知道他是一个“屌屌”的FrameLayout,然后呢，他被设计出来主要是为了以下两个使用场景:</p>
<p>1.作为顶层的应用decor或chrome layout。 </p>
<p>2.作为1个或几个具有具体内部交互的子view的容器。</p>
<p>coordinatorlayout通过为其子代具体实例化behavior，为单独的父代能提供多种不同的内部交互，子view之间也能进行相互互动，子view能通过使用默认behavior注解，能使用默认behavior。behavior覆盖范围从侧拉栏到滑动取消元素，按钮都能应用上多种的内部交互以及布局变化效果。coordinatorlayout的子view是通过anchor来实现具体定位，但是anchor的view id不能是该view自身或已经anchor的child的子代。</p>
<p>子view都可以制定嵌入边界，它描述了子view如何嵌入coordinatorlayout。子view也能通过dodgeInsetEdges属性来设置如何回避具有相同嵌入边界的同代，防止view之间的相互覆盖。</p>
<p>在coordinatorlayout内部api中有一套需要理解且会用的机制：NestedScroll 嵌套滚动机制；<br>这套机制通过内部：<strong>onNestedPreScroll / onStartNestedScroll / onNestedScroll / onStopNestedScroll / onNestedFling(ADDITIONAL)</strong></p>
<ul>
<li>onNestedPreScroll:</li>
</ul>
<blockquote>
<p>void onNestedPreScroll (View target,<br>                int dx,<br>                int dy,<br>                int[] consumed)</p>
<p>React to a nested scroll in progress before the target view consumes a portion of the scroll.</p>
<p>When working with nested scrolling often the parent view may want an opportunity to consume the scroll before the nested scrolling child does. An example of this is a drawer that contains a scrollable list. The user will want to be able to scroll the list fully into view before the list itself begins scrolling.</p>
<p>onNestedPreScroll is called when a nested scrolling child invokes dispatchNestedPreScroll(int, int, int[], int[]). The implementation should report how any pixels of the scroll reported by dx, dy were consumed in the consumed array. Index 0 corresponds to dx and index 1 corresponds to dy. This parameter will never be null. Initial values for consumed[0] and consumed[1] will always be 0.</p>
</blockquote>
<p>根据params 该方法会在target消费scroll距离之前会调用该方法。在使用嵌入滚动的时候，父代往往是想在子代之前将scroll距离消费掉，比如drawer，在drawer完全展示之后才开始实现list的滚动<br>当嵌套滚动子代唤起dispatchNestedPreScroll的时候，该方法会被调用。具体实现中告知从dx，dy反馈回来的滚动距离是如何被消费的。消费数据中0指代的是dx，1指代的是dy，该参数永不为0.</p>
<table>
<thead>
<tr>
<th>Params</th>
<th>Detail</th>
</tr>
</thead>
<tbody>
<tr>
<td>target</td>
<td>View: View that initiated the nested scroll</td>
</tr>
<tr>
<td>dx</td>
<td>int: Horizontal scroll distance in pixels</td>
</tr>
<tr>
<td>dy</td>
<td>int: Vertical scroll distance in pixels</td>
</tr>
<tr>
<td>consumed</td>
<td>int: Output. The horizontal and vertical scroll distance consumed by this parent</td>
</tr>
</tbody>
</table>
<ul>
<li>onStartNestedScroll</li>
</ul>
<blockquote>
<p>boolean onStartNestedScroll (View child,<br>                View target,<br>                int axes,<br>                int type)</p>
<p>React to a descendant view initiating a nestable scroll operation, claiming the nested scroll operation if appropriate.<br>This method will be called in response to a descendant view invoking startNestedScroll(View, int). Each parent up the view hierarchy will be given an opportunity to respond and claim the nested scrolling operation by returning true.<br>This method may be overridden by ViewParent implementations to indicate when the view is willing to support a nested scrolling operation that is about to begin. If it returns true, this ViewParent will become the target view’s nested scrolling parent for the duration of the scroll operation in progress. When the nested scroll is finished this ViewParent will receive a call to onStopNestedScroll(View, int).</p>
</blockquote>
<p>子代调用startNestedScroll时候，其上每个父代都能通过该方法返回true来对这个嵌套滚动进行反馈。个方法可能会被view父代的实现类重写用来指导view什么时候去支持一个正要发生的嵌套滚动事件。如果返回true的话，这个view父代就会在嵌套滚动过程中成为目标view的嵌套滚动父代，之后滚动结束时<br>这个view会调用onStopNestedScroll方法</p>
<table>
<thead>
<tr>
<th>Params</th>
<th>Detail</th>
</tr>
</thead>
<tbody>
<tr>
<td>child</td>
<td>View: Direct child of this ViewParent containing target</td>
</tr>
<tr>
<td>target</td>
<td>View: View that initiated the nested scroll</td>
</tr>
<tr>
<td>axes</td>
<td>int: Flags consisting of SCROLL_AXIS_HORIZONTAL, SCROLL_AXIS_VERTICAL or both</td>
</tr>
<tr>
<td>type</td>
<td>int: the type of input which cause this scroll event</td>
</tr>
</tbody>
</table>
<ul>
<li>onNestedScroll</li>
</ul>
<blockquote>
<p>void onNestedScroll (View target,<br>                int dxConsumed,<br>                int dyConsumed,<br>                int dxUnconsumed,<br>                int dyUnconsumed)</p>
<p>React to a nested scroll in progress.</p>
<p>This method will be called when the ViewParent’s current nested scrolling child view dispatches a nested scroll event. To receive calls to this method the ViewParent must have previously returned true for a call to onStartNestedScroll(View, View, int).</p>
<p>Both the consumed and unconsumed portions of the scroll distance are reported to the ViewParent. An implementation may choose to use the consumed portion to match or chase scroll position of multiple child elements, for example. The unconsumed portion may be used to allow continuous dragging of multiple scrolling or draggable elements, such as scrolling a list within a vertical drawer where the drawer begins dragging once the edge of inner scrolling content is reached.</p>
</blockquote>
<p>对嵌套滚动过程作出反应。该方法会在父代当前的嵌套滚动子代分发滚动事件的时候被调用，当然父代必须在之前onStartNestedScroll方法中返回true才能收到调用哟～<br>下面这段就跟我们说你能怎么去用这些个距离了，当然这也是大家都想关注的重点。</p>
<table>
<thead>
<tr>
<th>Params</th>
<th>Detail</th>
</tr>
</thead>
<tbody>
<tr>
<td>target</td>
<td>View: The descendent view controlling the nested scroll</td>
</tr>
<tr>
<td>dxConsumed</td>
<td>int: Horizontal scroll distance in pixels already consumed by target</td>
</tr>
<tr>
<td>dyConsumed</td>
<td>int: Vertical scroll distance in pixels already consumed by target</td>
</tr>
<tr>
<td>dxUnconsumed</td>
<td>int: Horizontal scroll distance in pixels not consumed by target</td>
</tr>
<tr>
<td>dyUnconsumed</td>
<td>int: Vertical scroll distance in pixels not consumed by target</td>
</tr>
<tr>
<td>type</td>
<td>int: the type of input which cause this scroll event</td>
</tr>
</tbody>
</table>
<ul>
<li>onStopNestedScroll</li>
</ul>
<blockquote>
<p>void onStopNestedScroll (View target,<br>                int type)<br>React to a nested scroll operation ending.</p>
<p>Perform cleanup after a nested scrolling operation. This method will be called when a nested scroll stops, for example when a nested touch scroll ends with a ACTION_UP or ACTION_CANCEL event. Implementations of this method should always call their superclass’s implementation of this method if one is present.</p>
</blockquote>
<p>对应的肯定就是嵌套滚动事件的结束，扮演的是事件结束的收尾者咯，重写这方法你得记得super(target，type)一下，方便收拾。<br>以上的方法都是给父代重写的接口，而他的嵌套滚动的子代也需要实现NestedScrollingChild接口。</p>
<h3 id="NestedScrollingChild"><a href="#NestedScrollingChild" class="headerlink" title="NestedScrollingChild"></a>NestedScrollingChild</h3><p>在目前版本中实现了该接口的有：NestedScrollView/RecyclerView/SwipeRefreshLayout等等</p>
<blockquote>
<p>This interface should be implemented by View subclasses that wish to support dispatching nested scrolling operations to a cooperating parent ViewGroup.</p>
<p>Classes implementing this interface should create a final instance of a NestedScrollingChildHelper as a field and delegate any View methods to the NestedScrollingChildHelper methods of the same signature.</p>
<p>Views invoking nested scrolling functionality should always do so from the relevant ViewCompat, ViewGroupCompat or ViewParentCompat compatibility shim static methods. This ensures interoperability with nested scrolling views on Android 5.0 Lollipop and newer.</p>
</blockquote>
<p>通过上面对该接口的描述，我们需要注意到每个子代view中还需要创建一个final类型的NestedScrollingChildHelper实例。该接口中我们需要去实现的方法有：</p>
<ul>
<li>startNestedScroll</li>
<li>dispatchNestedPreScroll</li>
<li>dispatchNestedScroll</li>
</ul>
<p>从startNestedScroll的方法描述中我们能看到这个流程是怎么流转的</p>
<blockquote>
<p>If startNestedScroll returns true, a cooperative parent was found. If it returns false the caller may ignore the rest of this contract until the next scroll. Calling startNestedScroll while a nested scroll is already in progress will return true.</p>
<p>At each incremental step of the scroll the caller should invoke dispatchNestedPreScroll once it has calculated the requested scrolling delta. If it returns true the nested scrolling parent at least partially consumed the scroll and the caller should adjust the amount it scrolls by.</p>
<p>After applying the remainder of the scroll delta the caller should invoke dispatchNestedScroll, passing both the delta consumed and the delta unconsumed. A nested scrolling parent may treat these values differently. See onNestedScroll(View, int, int, int, int).</p>
</blockquote>
<p>我们在onTouchEvent中对ACTION_DOWN事件进行监控，调用该方法，而该方法需要去调用getScrollingChildHelper().startNestedScroll(axes)来帮你找到是否存在可以相应这个嵌套滚动的父代以及调用父代onStartNestedScroll判断是否截获这个动作，再之后的ACTION_MOVE事件中我们通过dispatchNestedPreScroll调用的是getScrollingChildHelper().dispatchNestedPreScroll(dx, dy, consumed, offsetInWindow)中询问父代是否要消费滚动距离，父代当然是通过我们前面说的onNestedPreScroll方法来进行消费咯～</p>
<p><a href="https://segmentfault.com/a/1190000002873657" target="_blank" rel="external">这是一篇我认为流程说的很对的文章</a><br>在实战中要不明白的话我推荐去看看RecyclerView的onTouchEvent源码</p>
<h2 id="AppBarLayout定义"><a href="#AppBarLayout定义" class="headerlink" title="AppBarLayout定义"></a>AppBarLayout定义</h2><blockquote>
<p>AppBarLayout is a vertical LinearLayout which implements many of the features of material designs app bar concept, namely scrolling gestures.</p>
<p>Children should provide their desired scrolling behavior through setScrollFlags(int) and the associated layout xml attribute: app:layout_scrollFlags.</p>
<p>This view depends heavily on being used as a direct child within a CoordinatorLayout. If you use AppBarLayout within a different ViewGroup, most of it’s functionality will not work.</p>
<p>AppBarLayout also requires a separate scrolling sibling in order to know when to scroll. The binding is done through the AppBarLayout.ScrollingViewBehavior behavior class, meaning that you should set your scrolling view’s behavior to be an instance of AppBarLayout.ScrollingViewBehavior. A string resource containing the full class name is available. </p>
</blockquote>
<ul>
<li>google的解释：说这个布局呢，他首先是一个垂直的线性布局，其次他实现了md内appbar的很多特性，主要指得是滚动手势。</li>
<li>那么他是怎么样来实现的呢？他的children可以通过xml中app:layout_scrollFlags或者代码中调用 setScrollFlags(int)方法来实现。</li>
<li>那么他需要遵守什么规定呢？最最最基础的就是：他得是CoordinatorLayout的<strong>直接子代</strong>，要不是的话？那么抱歉，绝大部分功能都用不了。其次呢？他还必须有一个独立的可以滚动的兄弟view来告诉他什么时候去scroll.他们之间通过的是AppBarLayout.ScrollingViewBehavior类来实现的绑定，所以你得老老实实的给你这个会scroll的兄弟view设置一个这样的behavior.</li>
</ul>
<p><img src="http://omizc9kwk.bkt.clouddn.com/appbar_structure.png" alt="APPBAR_Structure"><br>google定义的appbar结构</p>
<h2 id="AppBarLayout实操"><a href="#AppBarLayout实操" class="headerlink" title="AppBarLayout实操"></a>AppBarLayout实操</h2><p><strong>ScrollFlags一共包含五种，他们分别是:scroll | snap | enterAlways | exitUntilCollapsed | enterAlwaysCollapsed</strong>.<br>这五种flag的效果各自不同，可以混搭，下面我们分别说下效果;</p>
<h3 id="scroll-对应代码中的int-SCROLL-FLAG-SCROLL"><a href="#scroll-对应代码中的int-SCROLL-FLAG-SCROLL" class="headerlink" title="scroll : 对应代码中的int = SCROLL_FLAG_SCROLL"></a><strong>scroll</strong> : 对应代码中的int = SCROLL_FLAG_SCROLL</h3><blockquote>
<p>The view will be scroll in direct relation to scroll events. This flag needs to be set for any of the other flags to take effect. If any sibling views before this one do not have this flag, then this value has no effect.</p>
</blockquote>
<ul>
<li>该flag定义下的view将会直接跟sroll event关联，而这个flag就是scroll里最基本flag了，其他4种flag都需要配合着他才能生效如 “scroll|snap” 这样snap才会生效，单独使用snap是无效的。</li>
</ul>
<h3 id="snap-：对应代码中int-SCROLL-FLAG-SNAP"><a href="#snap-：对应代码中int-SCROLL-FLAG-SNAP" class="headerlink" title="snap ：对应代码中int = SCROLL_FLAG_SNAP"></a><strong>snap</strong> ：对应代码中int = SCROLL_FLAG_SNAP</h3><blockquote>
<p>Upon a scroll ending, if the view is only partially visible then it will be snapped and scrolled to it’s closest edge. For example, if the view only has it’s bottom 25%<br>         displayed, it will be scrolled off screen completely. Conversely, if it’s bottom 75%<br>   is visible then it will be scrolled fully into view.</p>
</blockquote>
<ul>
<li>flag如名，snap的意思就是啪一声，他代表的模式是“在滚动即将结束的时候，要是该view是部分可见的情况下，他会直接滚进理他最近的边界” 举例子就是：要是他现在离底部只剩25%了，那么该view就会跟随那75%已经被盖住的view一起消失，反之要是只进去25%，那么不好意思了，本view会恢复原状，100%的出现在你面前！</li>
</ul>
<h3 id="enterAlways-对应代码中的int-SCROLL-FLAG-ENTER-ALWAYS"><a href="#enterAlways-对应代码中的int-SCROLL-FLAG-ENTER-ALWAYS" class="headerlink" title="enterAlways : 对应代码中的int = SCROLL_FLAG_ENTER_ALWAYS"></a><strong>enterAlways</strong> : 对应代码中的int = SCROLL_FLAG_ENTER_ALWAYS</h3><blockquote>
<p> When entering (scrolling on screen) the view will scroll on any downwards<br>         scroll event, regardless of whether the scrolling view is also scrolling. This<br>         is commonly referred to as the ‘quick return’ pattern.</p>
</blockquote>
<ul>
<li>当屏幕开始滚动的时候，该view会响应所有向下滚动事件，根本不会考虑关联的srcoll view是否也正在滑动，这个模式在快速返回功能中经常被用到。</li>
</ul>
<h3 id="enterAlwaysCollapsed-对应代码中的int-SCROLL-FLAG-ENTER-ALWAYS-COLLAPSED"><a href="#enterAlwaysCollapsed-对应代码中的int-SCROLL-FLAG-ENTER-ALWAYS-COLLAPSED" class="headerlink" title="enterAlwaysCollapsed : 对应代码中的int = SCROLL_FLAG_ENTER_ALWAYS_COLLAPSED"></a><strong>enterAlwaysCollapsed</strong> : 对应代码中的int = SCROLL_FLAG_ENTER_ALWAYS_COLLAPSED</h3><blockquote>
<p>An additional flag for ‘enterAlways’ which modifies the returning view to<br>         only initially scroll back to it’s collapsed height. Once the scrolling view has<br>         reached the end of it’s scroll range, the remainder of this view will be scrolled<br>         into view. The collapsed height is defined by the view’s minimum height.</p>
</blockquote>
<ul>
<li>这是一个enterAlways的补充flag，他也是响应的下滚动作，但是他最开始只会将返回view设定的折叠高度大小部分，只有当scrollview在到达滚动他滚动边界的时候，才会返回view的全部界面。而view的折叠高度是通过view的最小高度来定义的。</li>
</ul>
<h3 id="exitUntilCollapsed-对应代码中的int-SCROLL-FLAG-EXIT-UNTIL-COLLAPSED"><a href="#exitUntilCollapsed-对应代码中的int-SCROLL-FLAG-EXIT-UNTIL-COLLAPSED" class="headerlink" title="exitUntilCollapsed : 对应代码中的int = SCROLL_FLAG_EXIT_UNTIL_COLLAPSED"></a><strong>exitUntilCollapsed</strong> : 对应代码中的int = SCROLL_FLAG_EXIT_UNTIL_COLLAPSED</h3><blockquote>
<p>When exiting (scrolling off screen) the view will be scrolled until it is<br>          ‘collapsed’. The collapsed height is defined by the view’s minimum height.</p>
</blockquote>
<ul>
<li>滚离界面的情况下，view在直到完全折叠前都会跟着滚动，这个完全折叠的高度也是通过view的最小高度来定义。</li>
</ul>
<p>除了flag，我们经常还会用到的常用属性有contentScrim/statusBarScrim/layout_collapseMode<br>第一个是标题栏的底色，第二个是状态栏的颜色，第三个是折叠的模式：有parallax视差 pin固定 none无</p>
<h3 id="AppBarLayout中有一个addOnOffsetChangedListener"><a href="#AppBarLayout中有一个addOnOffsetChangedListener" class="headerlink" title="AppBarLayout中有一个addOnOffsetChangedListener()"></a>AppBarLayout中有一个addOnOffsetChangedListener()</h3><p>该方法能很好的对appbarlayout中所有子view进行控制，下面会贴代码示例一下</p>
<pre><code>cur = AppBarLayoutState.Expanded;
appBarLayout = (AppBarLayout) findViewById(R.id.appbar);
appBarLayout.addOnOffsetChangedListener(new AppBarLayout.OnOffsetChangedListener() {
    @Override
    public void onOffsetChanged(AppBarLayout appBarLayout, int verticalOffset) {

        Log.e(&quot;&quot;,&quot;range:&quot;+appBarLayout.getScrollY()
        );
        if(verticalOffset==0){
            cur = AppBarLayoutState.Expanded;
            //这里可对collapseToolbar等部件内部现实做操作
        }else if(Math.abs(verticalOffset)&gt;=appBarLayout.getTotalScrollRange()&amp;&amp;cur!=AppBarLayoutState.Collapsed){
            cur = AppBarLayoutState.Collapsed;
            //这里可对collapseToolbar等部件内部现实做操作
        }
    }
});
</code></pre><p> 通过上面的代码我们不仅能掌握appbar状态也能动态进行view的显示操作从而完成一些跟appbar状态变化有关的视图操作。但是如果涉及到位置变换等其他更加复杂的方面，我们就需要引入自定义behavior了。再讲behavior之前我们还要说一下其他几个能配合appbarlayout使用的哥们儿：CollapsingToolbarLayout/ButtonBarLayout/Tablayout/fab/TextInputLayout</p>
<h2 id="CollapsingToolbarLayout定义"><a href="#CollapsingToolbarLayout定义" class="headerlink" title="CollapsingToolbarLayout定义"></a>CollapsingToolbarLayout定义</h2><blockquote>
<p>CollapsingToolbarLayout is a wrapper for Toolbar which implements a collapsing app bar. It is designed to be used as a direct child of a AppBarLayout.</p>
</blockquote>
<p>google对他的介绍很简单：他是Toolbar的包装类，实现了折叠appbar，他是被设计用做AppBarLayout的<strong>直接子代</strong>。<br>google给我们介绍了一些他的特点：</p>
<h3 id="Collapsing-title"><a href="#Collapsing-title" class="headerlink" title="Collapsing title"></a>Collapsing title</h3><blockquote>
<p>A title which is larger when the layout is fully visible but collapses and becomes smaller as the layout is scrolled off screen. You can set the title to display via setTitle(CharSequence). The title appearance can be tweaked via the collapsedTextAppearance and expandedTextAppearance attributes.</p>
</blockquote>
<p>该title在layout全可见的时候会比在折叠情况下大一些，你也能通过setTitle()来设置，title会根据collapsedTextAppearance和expandedTextAppearance属性进行相应的调整</p>
<h3 id="Content-scrim"><a href="#Content-scrim" class="headerlink" title="Content scrim"></a>Content scrim</h3><blockquote>
<p>A full-bleed scrim which is show or hidden when the scroll position has hit a certain threshold. You can change this via setContentScrim(Drawable).</p>
</blockquote>
<p>前面说过，pass</p>
<h3 id="Status-bar-scrim"><a href="#Status-bar-scrim" class="headerlink" title="Status bar scrim"></a>Status bar scrim</h3><blockquote>
<p>A scrim which is show or hidden behind the status bar when the scroll position has hit a certain threshold. You can change this via setStatusBarScrim(Drawable). This only works on LOLLIPOP devices when we set to fit system windows.</p>
</blockquote>
<p>前面说过，pass</p>
<h3 id="Parallax-scrolling-children"><a href="#Parallax-scrolling-children" class="headerlink" title="Parallax scrolling children"></a>Parallax scrolling children</h3><blockquote>
<p>Child views can opt to be scrolled within this layout in a parallax fashion. See COLLAPSE_MODE_PARALLAX and setParallaxMultiplier(float).</p>
</blockquote>
<p>前面说过，pass</p>
<h3 id="Pinned-position-children"><a href="#Pinned-position-children" class="headerlink" title="Pinned position children"></a>Pinned position children</h3><blockquote>
<p>Child views can opt to be pinned in space globally. This is useful when implementing a collapsing as it allows the Toolbar to be fixed in place even though this layout is moving. See COLLAPSE_MODE_PIN.<br>Do not manually add views to the Toolbar at run time. We will add a ‘dummy view’ to the Toolbar which allows us to work out the available space for the title. This can interfere with any views which you add.</p>
</blockquote>
<p>前面说过，pass</p>
<p>其他的一些具体的xml类属性我们给出了google的<a href="https://developer.android.google.cn/reference/android/support/design/widget/CollapsingToolbarLayout.html" target="_blank" rel="external">相关地址</a></p>
<p>其他的view大部分适配进anchor／anchorGravity/collpseMode等属性就能进行简单的变换了。深入的变化我们就进入到自定义behavior了.</p>
<h2 id="Behavior定义"><a href="#Behavior定义" class="headerlink" title="Behavior定义"></a>Behavior定义</h2><p>讲了那么多我们才说到behavior，在google文档上我们是找不到独立的behavior类的，你会看到无数个xxxx.xxxBehavior,但是他们追根究底都是Coordinator.Behavior<v>的子类，这个爸爸级别的类却只是可怜的Coordinator的一个萌萌哒的抽象类，这也是google爸爸为了帮你们省事就连前面讲的NestedScroll都联动的封装在了这个类里，只要重载Behavior里的相应办法，中间的流程google都帮你实现好了。从无数片教材上我们都看到了要想自定义Behavior,那你至少的实现两个方法：</v></p>
<p>1.layoutDependsOn(CoordinatorLayout parent,<br>                V child,<br>                View dependency)</p>
<p>2.onDependentViewChanged(CoordinatorLayout parent,<br>                V child,<br>                View dependency)</p>
<p>方法1帮助coordinator will:</p>
<blockquote>
<p>Always lay out this child after the dependent child is laid out, regardless of child order.<br>Call onDependentViewChanged(CoordinatorLayout, V, View) when the dependency view’s layout or position changes.</p>
<p>总是在依赖view布局之后去布局具有behavior的view<br>当依赖view的布局或者位置变化时调用behavior的onDependentViewChanged</p>
</blockquote>
<p>方法2就是让持有behavior的child view实现一些变化咯。</p>
<p>你现在又该说：那我这边要是rv这种布局滚动的事件不就没发发挥了么？所以你得去实现另外几个嵌套滚动的配套方法了。</p>
<p>3.onStartNestedScroll(CoordinatorLayout coordinatorLayout, V child, View directTargetChild, View target, int axes, int type)</p>
<p>4.onNestedPreScroll(CoordinatorLayout coordinatorLayout, V child, View target, int dx, int dy, int[] consumed, int type)</p>
<p>5.onNestedScroll(CoordinatorLayout coordinatorLayout, V child, View target, int dxConsumed, int dyConsumed, int dxUnconsumed, int dyUnconsumed, int type)</p>
<p>这3个哥们儿都看腻歪了吧……这其实是将嵌套滚动机制与behavior结合起来的方法，但是这2者可不是绑定的。你能在自定义view里也去实现这些机制。具体的用法前面的链接或者你看了我说的源码地方之后也就会了吧。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/21/ui/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/21/ui/" itemprop="url">
                  ui
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-21T10:28:49+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="login"><a href="#login" class="headerlink" title="login"></a>login</h3><p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/DC47F3ED598B04B69A52DF4C2144E943.jpg"></p>
<h3 id="index"><a href="#index" class="headerlink" title="index"></a>index</h3><p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/261E051728364F566C5FC426E8C230AE.jpg"></p>
<p>###profile</p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/3F1E9B3F6B7ABBF4A293E356E2E6AE8E.jpg"></p>
<h3 id="message"><a href="#message" class="headerlink" title="message"></a>message</h3><p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/15F92F291F3E6E2144F7EB9F868B57DB.jpg"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/B85E7F9C08E437802B0F72AC395362A6.jpg"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/D3F708DAD371A9AA05FC98D475319BBF.jpg"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/12/design/" itemprop="url">
                  design
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T16:22:26+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="定位："><a href="#定位：" class="headerlink" title="定位："></a>定位：</h3><ul>
<li>整个平台是为了服务未来多学科业务接入而进行准备的整合平台涵盖WEB端和移动端；</li>
<li>血透项目是平台最先开始的一门专项业务；</li>
<li>血透项目的特点是：同时存在多个中心，会员依附中心存在，人数不多，长期且固定，流动半径受限；中心业务特点：项目固定，诊断频率低，护理责任重但工作事项杂且重复度高；</li>
</ul>
<p>基于以上三点，我们认为血透项目的功能应当是适度接入平台功能的同时着重深化几个具有<strong>高区分度，高实用性的典型功能</strong>。</p>
<p><font color="red" size="3">为什么这样说</font><br>每个中心运营阈值唯一关联的是透析机数量，针对非24小时排班的中心，假定20台仪器全部正常运行上下午两班患者，且每位患者隔一天就诊一次。</p>
<ul>
<li>一个中心固定患者至多是：<strong>20x2x2= 80人</strong></li>
<li>每月每人体检一次，那么医生诊断的频率为：<strong>80（人次）/22（工作日）= 3.63（人次/日）</strong></li>
<li>每次体检数据项：<strong>28项以上</strong></li>
<li>每月产生基础数据量：<strong>20（床）x2（每日透析次数）x4（治疗时长）x13(每小时采集数据项)x22（工作日）=45760（项）</strong></li>
</ul>
<p>从以上数据我们细化分析还能知道的是针对当月每位患者的数据量就高达<strong>45769/80=572</strong>个之多，那么一季度，半年，一年的数据量对任何一位医生来说记住或是查阅就已经是很难完成的任务了，会花费大量时间以及精力完成统计任务，而不排除不合理的统计方式并不会让医生对患者病情的了解有更深的把握；</p>
<p>所以我们基于血液透析中心内部管控的传统现状和特点，利用大数据管理手段和创新服务项目，一方面协助医护人员对患者更精细化的管理和更全面的了解，另一方面增强患者的自我管理能力和粘性，提高患者就医的依从度和体验舒适度。是一款辅助、兼容性强的智能化运维系统。</p>
<h3 id="管理："><a href="#管理：" class="headerlink" title="管理："></a>管理：</h3><ul>
<li><p>基于后台已收集数据提供的质控管理：    </p>
<pre><code>1.精确到每人每次的医疗情况追踪以及回顾；
2.可回溯追责的医疗流程数据记录；
3.有权重且具备正反馈的护理评价反馈机制；
4.公开可查的评价展示；
5.长期有效的医疗数据保存；
6.成本管理，kpi考核，业绩管理；
</code></pre></li>
</ul>
<h3 id="服务："><a href="#服务：" class="headerlink" title="服务："></a>服务：</h3><p>增强互动；<br>服务内容单一，心理辅导弱；<br>非医学信息少；<br>公益制度;</p>
<p><img src="http://ooy5ktou9.bkt.clouddn.com/appfunction.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/25/调研报告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/25/调研报告/" itemprop="url">
                  调研报告
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-25T12:43:28+08:00">
                2017-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="兖州九一医院血透中心简要说明"><a href="#兖州九一医院血透中心简要说明" class="headerlink" title="兖州九一医院血透中心简要说明"></a>兖州九一医院血透中心简要说明</h1><ul>
<li>人员构成：医生2名、护士9名、技师1名</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">人员类型</th>
<th style="text-align:center">人数</th>
<th style="text-align:center">职责</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">医生</td>
<td style="text-align:center">2</td>
<td style="text-align:center">制定治疗方案</td>
</tr>
<tr>
<td style="text-align:center">护士长</td>
<td style="text-align:center">1</td>
<td style="text-align:center">安排护士排班，以及日常管理工作</td>
</tr>
<tr>
<td style="text-align:center">副护士长</td>
<td style="text-align:center">2</td>
<td style="text-align:center">负责操作流程、医院感染等</td>
</tr>
<tr>
<td style="text-align:center">护士</td>
<td style="text-align:center">6</td>
<td style="text-align:center">上下午保证在职人员构成为3位实操护士+1位治疗护士+1位巡视护士</td>
</tr>
<tr>
<td style="text-align:center">技师</td>
<td style="text-align:center">1</td>
<td style="text-align:center">负责透析液配制、启动透析机水洗以及透析机维护维修工作，每月一次水机消毒</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">护士类型</th>
<th style="text-align:center">职责</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">实操护士</td>
<td style="text-align:center">按照1:5比例分配病人，完成病人上下机操作，其中主班护士额外肩负记录患者信息、收取治疗费用，下机负责机器消毒、物表消毒</td>
</tr>
<tr>
<td style="text-align:center">治疗护士</td>
<td style="text-align:center">负责记录药物出库适用，医疗垃圾处理，以及病人治疗费用缴纳</td>
</tr>
<tr>
<td style="text-align:center">巡视护士</td>
<td style="text-align:center">巡视其他护士工作是否正常开展</td>
</tr>
</tbody>
</table>
<ul>
<li>设备构成：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">设备名称</th>
<th style="text-align:center">台数</th>
<th style="text-align:center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HD机</td>
<td style="text-align:center">15</td>
<td style="text-align:center">普通病房</td>
</tr>
<tr>
<td style="text-align:center">HD机</td>
<td style="text-align:center">2</td>
<td style="text-align:center">传染病房（如乙肝、丙肝、梅毒等）</td>
</tr>
<tr>
<td style="text-align:center">HDF机</td>
<td style="text-align:center">1</td>
<td style="text-align:center">传染病房（如乙肝、丙肝、梅毒等）</td>
</tr>
<tr>
<td style="text-align:center">HDF机</td>
<td style="text-align:center">2</td>
<td style="text-align:center">普通病房</td>
</tr>
</tbody>
</table>
<h1 id="兖州九一医院血透中心流程说明"><a href="#兖州九一医院血透中心流程说明" class="headerlink" title="兖州九一医院血透中心流程说明"></a>兖州九一医院血透中心流程说明</h1><p><img src="http://omizc9kwk.bkt.clouddn.com/MainThread.png" alt="thread"></p>
<h2 id="流程说明"><a href="#流程说明" class="headerlink" title="流程说明"></a>流程说明</h2><table>
<thead>
<tr>
<th style="text-align:center">项目</th>
<th style="text-align:center">执行人</th>
<th style="text-align:center">目标</th>
<th style="text-align:center">可执行参数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">①化验结果分析</td>
<td style="text-align:center">医生</td>
<td style="text-align:center">分析当前身体各检测参数，病例、病史</td>
<td style="text-align:center"><strong>参见检查报告</strong></td>
</tr>
<tr>
<td style="text-align:center">②是否接诊依据</td>
<td style="text-align:center">医生</td>
<td style="text-align:center">是否接诊</td>
<td style="text-align:center">感染四项(HIV、乙肝、丙肝、梅毒 )</td>
</tr>
<tr>
<td style="text-align:center">③诊前表格填写</td>
<td style="text-align:center">医生&amp;护士</td>
<td style="text-align:center">透析病人基本资料</td>
<td style="text-align:center">透析病人基本资料</td>
</tr>
<tr>
<td style="text-align:center">④体征参数</td>
<td style="text-align:center">护士</td>
<td style="text-align:center">收集上机前患者体征</td>
<td style="text-align:center">体重、生命体征（血压(高压&gt;180 低压&lt;80)、脉搏、呼吸、体温）是否出血、是否发烧、皮肤情况: 正常 淤血 肿胀 破溃、内瘘情况: 正常 血肿 瘘口 疼痛 震颤音弱</td>
</tr>
<tr>
<td style="text-align:center">⑤上机前医嘱修改</td>
<td style="text-align:center">医生</td>
<td style="text-align:center">根据护士反馈后调整治疗方案</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">⑥透析方式 上机前准备</td>
<td style="text-align:center">护士</td>
<td style="text-align:center">根据医嘱实施透析</td>
<td style="text-align:center">透析方式、钙钾离子浓度、<strong>参见抗凝剂参数表格、参见血管通路记载表格</strong>、上机时间</td>
</tr>
<tr>
<td style="text-align:center">⑦上机后医嘱修改</td>
<td style="text-align:center">医生</td>
<td style="text-align:center">本次透析医嘱</td>
<td style="text-align:center">处方药服用或静推EPO，设定应脱水量</td>
</tr>
<tr>
<td style="text-align:center">⑧每小时体征参数</td>
<td style="text-align:center">护士</td>
<td style="text-align:center">每次体征参数录入</td>
<td style="text-align:center"><strong>参见透析方式表</strong></td>
</tr>
<tr>
<td style="text-align:center">⑨透析后体征参数</td>
<td style="text-align:center">护士</td>
<td style="text-align:center">透析后参数收集(下次透析做参考)</td>
<td style="text-align:center">包含但不限于：透析后评估情况、血压、透析后体重、计算实际脱水量、体温、透析器凝固程度、结束时间</td>
</tr>
<tr>
<td style="text-align:center">⑩病例记载</td>
<td style="text-align:center">医生</td>
<td style="text-align:center">透析结束记载病例</td>
<td style="text-align:center">病情记载</td>
</tr>
</tbody>
</table>
<h2 id="抗凝剂"><a href="#抗凝剂" class="headerlink" title="抗凝剂"></a>抗凝剂</h2><ul>
<li><p>类别：普通肝素、低分子肝素、无肝素</p>
</li>
<li><p>参数</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">参数名称</th>
<th style="text-align:center">单位</th>
<th style="text-align:center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">priming</td>
<td style="text-align:center">u</td>
<td style="text-align:center">无肝素透析的体外循环指标</td>
</tr>
<tr>
<td style="text-align:center">生理盐水</td>
<td style="text-align:center">ml/h</td>
<td style="text-align:center">无肝素透析时，每半小时用量</td>
</tr>
<tr>
<td style="text-align:center">首剂量</td>
<td style="text-align:center">u</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">维持量</td>
<td style="text-align:center">u/hr</td>
</tr>
</tbody>
</table>
<h2 id="血管通路"><a href="#血管通路" class="headerlink" title="血管通路"></a>血管通路</h2><ul>
<li>左/右</li>
<li>内颈静脉/股静脉</li>
<li>临时/长期</li>
<li>中心静脉导管／内瘘管／移植血管</li>
</ul>
<h1 id="透析方式"><a href="#透析方式" class="headerlink" title="透析方式"></a>透析方式</h1><p>根据透析方式整体治疗类别是分为：<strong>血透（HD）</strong> ／ <strong>血滤（HDF）</strong> ／ <strong>血液灌流（HP）</strong></p>
<ul>
<li><p>细化区分：肝素透析、无肝素透析、肝素血滤、无肝素血滤。<br>下面用表格展示细化之后不同透析方式在透析过程中的不同特质。   </p>
</li>
<li><font color="#ff0000" size="2">无肝素的两种透析治疗都需要在透析开始前进行体外循环，需要医生指导priming计量</font></li>
<li>治疗过程中需要观察患者的症状包括但不限于：<font color="#ff0000" size="2">①头痛 ②头晕 ③恶心 ④呕吐 ⑤胸闷 ⑥心悸 ⑦抽筋 ⑧寒颤 ⑨皮肤痒 ⑩打哈欠 ⑾发热 ⑿呼吸喘</font></li>
<li></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">记录参数</th>
<th style="text-align:center">频率</th>
<th style="text-align:center">肝素血透</th>
<th style="text-align:center">无肝素血透</th>
<th style="text-align:center">肝素血滤</th>
<th style="text-align:center">无肝素血滤</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">透析机厂家</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">透析机型号</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">机器编号</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">血压</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">脉搏/呼吸（次/分）</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">血液流速</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">静脉压</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">透析压/膜上压</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">超滤率UFR(L/hr)/Total</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">透析液温度</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">透析液传导度</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">透析器价数</td>
<td style="text-align:center"><font color="#ff0000" size="3">30分钟</font></td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center">√</td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">肝素读数</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">症状</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">穿刺针数</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">穿刺针号码</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">是否换药</td>
<td style="text-align:center">每次</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">置换液量</td>
<td style="text-align:center"><font color="#ff0000" size="3">每小时</font></td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">血压</td>
<td style="text-align:center">每小时</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">生理盐水冲洗</td>
<td style="text-align:center"><font color="#ff0000" size="3">30分钟</font></td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center">√</td>
<td style="text-align:center"><font color="#ff0000" size="5">×</font></td>
<td style="text-align:center">√</td>
</tr>
</tbody>
</table>
<h1 id="特殊说明"><a href="#特殊说明" class="headerlink" title="特殊说明"></a>特殊说明</h1><h2 id="首次透析"><a href="#首次透析" class="headerlink" title="首次透析"></a>首次透析</h2><p>病人的首次透析方案惯例上是进行为期3天的连续透析治疗，时长从最初2小时，隔日递增1小时，直至第三日透析的4小时治疗时间。期间医生就要对患者进行上面表格内所有参数的设置工作（即透析方案的完成）</p>
<h2 id="体重数值解释："><a href="#体重数值解释：" class="headerlink" title="体重数值解释："></a>体重数值解释：</h2><ul>
<li>干体重：由医生多次诊断推理得出。</li>
<li>应脱水量：透析前体重 — 干体重</li>
<li>设定脱水量：由医生对应脱水量进行实际调整后的脱水量，最终反馈在病情记载中。</li>
<li>超滤量：等于设定脱水量</li>
<li>实际脱水量：透析前体重 — 透析后体重 </li>
</ul>
<h2 id="血透中心库存主要分两类："><a href="#血透中心库存主要分两类：" class="headerlink" title="血透中心库存主要分两类："></a>血透中心库存主要分两类：</h2><ul>
<li>血透中心自备用药</li>
<li>患者寄存在中心的药品</li>
</ul>
<h2 id="需具备功能："><a href="#需具备功能：" class="headerlink" title="需具备功能："></a>需具备功能：</h2><table>
<thead>
<tr>
<th style="text-align:center">所有者</th>
<th style="text-align:center">药品种类</th>
<th style="text-align:center">具备功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">血透中心</td>
<td style="text-align:center">常备药(如降压药等)</td>
<td style="text-align:center">药品的入库、出库、是否到保质期、药品到期自动销库</td>
</tr>
<tr>
<td style="text-align:center">患者</td>
<td style="text-align:center">医师开具的需注射性药物</td>
<td style="text-align:center">药品的入库、出库、是否需要再次开药、清空库存</td>
</tr>
</tbody>
</table>
<h2 id="九一医院血透中心药品种类说明："><a href="#九一医院血透中心药品种类说明：" class="headerlink" title="九一医院血透中心药品种类说明："></a>九一医院血透中心药品种类说明：</h2><table>
<thead>
<tr>
<th style="text-align:center">药品分类</th>
<th style="text-align:center">药品名称</th>
<th style="text-align:center">英文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">生血药</td>
<td style="text-align:center">重组人促红素</td>
<td style="text-align:center">Recombinant Human Erythropoietin（CHO）</td>
</tr>
<tr>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
</tr>
<tr>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
<td style="text-align:center">…</td>
</tr>
</tbody>
</table>
<h1 id="兖州九一医院血透中心叫号系统说明："><a href="#兖州九一医院血透中心叫号系统说明：" class="headerlink" title="兖州九一医院血透中心叫号系统说明："></a>兖州九一医院血透中心叫号系统说明：</h1><p>通过叫号系统管控整个诊疗室的就诊秩序<br>需求功能：按号就诊、按排班顺序就诊</p>
<h1 id="初步功能说明"><a href="#初步功能说明" class="headerlink" title="初步功能说明"></a>初步功能说明</h1><h2 id="接入平台"><a href="#接入平台" class="headerlink" title="接入平台"></a>接入平台</h2><pre><code>血透中心作为一个单独模块接入HVH平台。
</code></pre><ul>
<li>移动端针对人群为：患者，医生；</li>
<li>网页端针对人群为：护士；</li>
</ul>
<h2 id="具备功能"><a href="#具备功能" class="headerlink" title="具备功能"></a>具备功能</h2><p>HVH移动平台目前已经具备即时通信系统，后台数据可视化模块，新消息推送模块，短信发送模块以及患者自身信息管理。<br>hvh网页端需要实现：病人就诊信息录入，医护排班，患者排班，患者叫号，患者上下级，设备、耗材、药品库存管理功能<br>这些功能复合在一起能实现我们初期一些需求：</p>
<ul>
<li>医生能通过图表等形式精确的对每个病人进行治疗效果追踪，如血糖，血压走势等；</li>
<li>管理者能及时了解耗材，药品使用情况进行备货等操作;</li>
<li>护士或技师等周期性工作的管理提示；</li>
<li>患者接入系统能了解自己既往就诊情况，对自身健康管理有一个明确了解；</li>
<li>为患者提供一个了解自身病症最新医学进展，食谱搭配等消息等渠道；</li>
<li>对每日产生的大量数据进行持久化保存，但不具备法律或医理意义上的证明意义;</li>
</ul>
<p><img src="http://ooy5ktou9.bkt.clouddn.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20170712133102.png" alt=""></p>
<h2 id="数据设计"><a href="#数据设计" class="headerlink" title="数据设计"></a>数据设计</h2><p><img src="http://omizc9kwk.bkt.clouddn.com/data.jpeg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/25/summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/25/summary/" itemprop="url">
                  summary
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-25T12:43:27+08:00">
                2017-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="技术部工作报告"><a href="#技术部工作报告" class="headerlink" title="技术部工作报告"></a>技术部工作报告</h1><h2 id="工作主体已完成部分"><a href="#工作主体已完成部分" class="headerlink" title="工作主体已完成部分"></a>工作主体已完成部分</h2><blockquote>
<ul>
<li><strong>平台就诊的整体流程与思维导图</strong></li>
<li><strong>微信小程序以及Android程序第一级功能页面划分</strong></li>
<li><strong>Android App 系统框架搭建</strong></li>
<li><strong>Android App 登陆以及注册页面逻辑实现</strong></li>
<li><strong>短信登陆验证功能引入</strong></li>
<li><strong>weapp 系统的框架搭建</strong></li>
<li><strong>阿里云服务器</strong></li>
<li><strong>数据库基础表设计</strong></li>
<li><strong>后台接口开发</strong></li>
</ul>
</blockquote>
<h3 id="平台就诊的整体流程与思维导图"><a href="#平台就诊的整体流程与思维导图" class="headerlink" title="平台就诊的整体流程与思维导图"></a>平台就诊的整体流程与思维导图</h3><p><img src="http://omizc9kwk.bkt.clouddn.com/hvh%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.png" alt="xmind"></p>
<h3 id="微信小程序以及Android程序第一级功能页面划分"><a href="#微信小程序以及Android程序第一级功能页面划分" class="headerlink" title="微信小程序以及Android程序第一级功能页面划分"></a>微信小程序以及Android程序第一级功能页面划分</h3><p>第一级功能页面中包含：<strong>登陆页面/注册页面/主页面/订单页面/消息页面</strong></p>
<p>实际UI效果图根据上周(4月17-21日)期间沟通最迟5.1节后能得到最终效果图，下面展示的页面图均为页面布局的大体示意图</p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E7%99%BB%E9%99%86.png"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E6%B3%A8%E5%86%8C.png"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E4%B8%BB%E9%A1%B5.png"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E8%AE%A2%E5%8D%95.png"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E6%B6%88%E6%81%AF.png"></p>
<p><img width="260" height="500" src="http://omizc9kwk.bkt.clouddn.com/%E6%88%91%E7%9A%84.png"></p>
<h3 id="Android-App-系统框架搭建"><a href="#Android-App-系统框架搭建" class="headerlink" title="Android App 系统框架搭建"></a>Android App 系统框架搭建</h3><p>依照模块化开发思想完善的系统框架，参考了<a href="https://github.com/SpinyTech/ModularizationArchitecture" target="_blank" rel="external">SpinyTech-ModularizationArchitecture</a>,最终效果能使得功能模块开发高度解耦合，实现多点同时开发，互不影响，且功能上实现自由组装，为之后影子app提供了一条便捷高效的途径，避免重复开发。</p>
<p>结构如下图所示：</p>
<p>功能依照module开发内部暴露可供其他模块调用的action并注册至provider,各module的provider统一注册至main module中，通过router library寻址来完成module之间的跳转。</p>
<p><img src="http://omizc9kwk.bkt.clouddn.com/%E8%B7%AF%E7%94%B1-4.png" alt="结构"></p>
<p>下图是描述的各个模块在不同进程下通过aidl(跨进程通讯)来完成的路由寻址</p>
<p><img src="http://omizc9kwk.bkt.clouddn.com/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E8%B7%AF%E7%94%B1%E8%BF%9E%E6%8E%A5%E5%9B%BE.png" alt="路由"></p>
<h3 id="Android登陆以及注册页面逻辑实现"><a href="#Android登陆以及注册页面逻辑实现" class="headerlink" title="Android登陆以及注册页面逻辑实现"></a>Android登陆以及注册页面逻辑实现</h3><p><img width="290" height="500" src="http://omizc9kwk.bkt.clouddn.com/login.png"></p>
<p><img src="http://omizc9kwk.bkt.clouddn.com/denglu.png" alt="yanzheng"></p>
<h4 id="当前开发进度：3月5日开始提交项目-至今4月25日"><a href="#当前开发进度：3月5日开始提交项目-至今4月25日" class="headerlink" title="当前开发进度：3月5日开始提交项目-至今4月25日"></a>当前开发进度：3月5日开始提交项目-至今4月25日</h4><p><img src="http://omizc9kwk.bkt.clouddn.com/commit.png" alt=""></p>
<h4 id="共计37次提交，代码提交量5194行"><a href="#共计37次提交，代码提交量5194行" class="headerlink" title="共计37次提交，代码提交量5194行"></a>共计37次提交，代码提交量5194行</h4><p><img src="http://omizc9kwk.bkt.clouddn.com/amber.png" alt=""></p>
<h3 id="weapp-系统的框架搭建"><a href="#weapp-系统的框架搭建" class="headerlink" title="weapp 系统的框架搭建"></a>weapp 系统的框架搭建</h3><h4 id="受限于小程序采用非标准的自定义-WXML-WXSS-以及固定的目录结构来进行开发-开发相对繁琐-为提高效率采用-gulp-等自动化工具实现了一套编译框架-可实现"><a href="#受限于小程序采用非标准的自定义-WXML-WXSS-以及固定的目录结构来进行开发-开发相对繁琐-为提高效率采用-gulp-等自动化工具实现了一套编译框架-可实现" class="headerlink" title="受限于小程序采用非标准的自定义 WXML / WXSS 以及固定的目录结构来进行开发,开发相对繁琐,为提高效率采用 gulp 等自动化工具实现了一套编译框架,可实现:"></a>受限于小程序采用非标准的自定义 WXML / WXSS 以及固定的目录结构来进行开发,开发相对繁琐,为提高效率采用 gulp 等自动化工具实现了一套编译框架,可实现:</h4><ul>
<li>XML =&gt; WXML</li>
<li>LESS =&gt; CSS</li>
<li>CSS =&gt; WXSS</li>
<li>generate =&gt; 命令行生成小程序要求的目录机构,并初始化基本架构内容</li>
<li>islint 代码规范</li>
<li>集成包管理系统</li>
<li>实时 watch 目录文件变化 刷新到微信开发者工具仿真预览</li>
<li>编译结构:</li>
</ul>
<p><img src="http://ooy5ktou9.bkt.clouddn.com/gulp.png" alt=""></p>
<h4 id="weapp-路由设计-一级路由"><a href="#weapp-路由设计-一级路由" class="headerlink" title="weapp 路由设计(一级路由)"></a>weapp 路由设计(一级路由)</h4><table>
<thead>
<tr>
<th style="text-align:left">url</th>
<th style="text-align:center">page</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">pages/index/index</td>
<td style="text-align:center">首页</td>
</tr>
<tr>
<td style="text-align:left">pages/order/order</td>
<td style="text-align:center">订单</td>
</tr>
<tr>
<td style="text-align:left">pages/message/messa</td>
<td style="text-align:center">消息</td>
</tr>
<tr>
<td style="text-align:left">pages/mine/mine</td>
<td style="text-align:center">个人中心</td>
</tr>
<tr>
<td style="text-align:left">pages/login/login</td>
<td style="text-align:center">登陆</td>
</tr>
<tr>
<td style="text-align:left">pages/register/register</td>
<td style="text-align:center">注册</td>
</tr>
<tr>
<td style="text-align:left">pages/forget/forge</td>
<td style="text-align:center">忘记密码</td>
</tr>
</tbody>
</table>
<h4 id="已实现功能"><a href="#已实现功能" class="headerlink" title="已实现功能"></a>已实现功能</h4><p><img src="http://ooy5ktou9.bkt.clouddn.com/login.png" alt=""></p>
<p>a.登录表单规则验证</p>
<p>b.登录信息提交验证</p>
<p>c.注册表单验证</p>
<p>d.注册提交认证</p>
<p>e.短信验证码验证</p>
<h3 id="阿里云服务器"><a href="#阿里云服务器" class="headerlink" title="阿里云服务器"></a>阿里云服务器</h3><p>HTTPS环境配置，开发阶段，只允许从公司IP连接，禁止其他IP访问</p>
<h3 id="数据库基础表设计"><a href="#数据库基础表设计" class="headerlink" title="数据库基础表设计"></a>数据库基础表设计</h3><p>User,Doctor,Hospital,PaidService,HealthRecord,Order,HistoryOrder<br><img src="http://omizc9kwk.bkt.clouddn.com/WechatIMG6.png" alt=""></p>
<h3 id="后台接口开发"><a href="#后台接口开发" class="headerlink" title="后台接口开发"></a>后台接口开发</h3><h4 id="数据结构设计"><a href="#数据结构设计" class="headerlink" title="数据结构设计"></a>数据结构设计</h4><p>Action,Connection,ConnectionPool,Lib,Pool,Redis,RedisPool,UserBase,User,Utils</p>
<h4 id="接口开发-注册、登录、退出、修改密码、重置密码"><a href="#接口开发-注册、登录、退出、修改密码、重置密码" class="headerlink" title="接口开发(注册、登录、退出、修改密码、重置密码)"></a>接口开发(注册、登录、退出、修改密码、重置密码)</h4><p><img src="http://omizc9kwk.bkt.clouddn.com/excel.png" alt=""></p>
<h4 id="使用Redis缓存减少数据库的访问"><a href="#使用Redis缓存减少数据库的访问" class="headerlink" title="使用Redis缓存减少数据库的访问"></a>使用Redis缓存减少数据库的访问</h4><h2 id="当前进行中工作"><a href="#当前进行中工作" class="headerlink" title="当前进行中工作"></a>当前进行中工作</h2><blockquote>
<ul>
<li>主页面图片加载框架</li>
<li>网络请求库搭建</li>
<li>主页面各布局动画效果实现</li>
<li>上传／断点下载图片功能</li>
<li>二级路由设计</li>
<li>双向数据绑定数据结构设计</li>
<li>短信网关及其缓冲池(HJSMS Pool)的开发</li>
</ul>
</blockquote>
<h2 id="后续工作开展"><a href="#后续工作开展" class="headerlink" title="后续工作开展"></a>后续工作开展</h2><blockquote>
<ul>
<li>第三方视频通信SDK接入</li>
<li>第三方即时通讯功能接入</li>
<li>支付方式接入</li>
<li>系统第二第三级页面功能以及布局的制定</li>
<li>回话通讯</li>
<li>数据延迟加载方式的确定</li>
<li>获取数据接口GetValue</li>
<li>数据结构(WeiXin微信小程序通信,SERVER_ERR错误信息统一处理)</li>
<li>根据业务逻辑修改及扩充数据库表</li>
</ul>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/24/自定义控件学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/自定义控件学习/" itemprop="url">
                  自定义控件学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-24T10:28:49+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="自定义控件学习"><a href="#自定义控件学习" class="headerlink" title="自定义控件学习"></a>自定义控件学习</h1><h2 id="初期准备"><a href="#初期准备" class="headerlink" title="初期准备"></a>初期准备</h2><p>我们在xml中定义的如button／textview等控件在android中一般是存在于android.R.attr.xxxxStyle中的，包含了默认的attr如width，height等，也包含着一些需要用户自定义的类型如text，align等内容。</p>
<p>我们的自定义控件在最开始可以简单的继承某个类型的控件开始，这里我选择的是<em>EditText</em>。自定义的话一定就设计到自定义的attr那么这部分我们首先就要熟悉android中控件的attr的书写规则。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">&lt;declare-styleable name=“your widget name”&gt;</div><div class="line">&lt;!——这是控件自定义属性的名字以及其类型——&gt;</div><div class="line">&lt;!——类型包括integer/dimension/color/string/reference/boolean／枚举类enum/flag/fraction——&gt;</div><div class="line">&lt;attr name=“attr name” format=“入参类型”&gt;&lt;/attr&gt;</div><div class="line">&lt;! ——下面是enum的格式,flag类似——&gt;</div><div class="line">&lt;attr name=“type”&gt;</div><div class="line">&lt;enum name=“type name” value=“1”&gt;</div><div class="line">&lt;/enum&gt;</div><div class="line">&lt;/attr&gt;</div><div class="line">&lt;/declare-styleable&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure>
<p>当然如果愿意了解更多可以看看： <a href="http://www.cnblogs.com/rayray/p/3442026.html" target="_blank" rel="external">【Android】Android自定义属性，attr format取值类型 - Rex.. - 博客园</a></p>
<p>下面我们就在res的values下新建attr文件用来存储我们的自定义的edittext属性</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">&lt;resources&gt;</div><div class="line">&lt;declare-styleable name="CodoEditText"&gt;</div><div class="line">&lt;attr name="funtype" format="enum"&gt;</div><div class="line">&lt;enum name="default" value="-1"&gt;&lt;/enum&gt;</div><div class="line">&lt;enum name="clear" value="0"&gt;&lt;/enum&gt;</div><div class="line">&lt;enum name="pwdExplode" value="1"&gt;&lt;/enum&gt;</div><div class="line">&lt;/attr&gt;</div><div class="line">&lt;attr name="eyeOpen" format="reference"&gt;&lt;/attr&gt;</div><div class="line">&lt;attr name="eyeClose" format="reference"&gt;&lt;/attr&gt;</div><div class="line">&lt;!--左侧Drawable宽度--&gt;</div><div class="line">&lt;attr name="leftDrawableWidth" format="dimension"/&gt;</div><div class="line">&lt;!--左侧Drawable的高度--&gt;</div><div class="line">&lt;attr name="leftDrawableHeight" format="dimension"/&gt;</div><div class="line">&lt;!--右侧Drawable的宽度--&gt;</div><div class="line">&lt;attr name="rightDrawableWidth" format="dimension"/&gt;</div><div class="line">&lt;!--右侧Drawable的高度--&gt;</div><div class="line">&lt;attr name="rightDrawableHeight" format="dimension"/&gt;</div><div class="line">&lt;/declare-styleable&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure>
<p>以上的代码我们定义了一个可以实现一键清除功能或者是密码是否可见的<em>EditText</em>,也为左右两侧图片提供了自定义大小。</p>
<p>其他的准备工作是：删除输入、密码可见、密码隐藏的<strong>icon</strong>，为删除按钮提供了<strong>selector</strong>，因为密码图标属于的是状态按钮所有没有对其进行selector。</p>
<p>selector代码如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">&lt;selector</div><div class="line">xmlns:android="http://schemas.android.com/apk/res/android"&gt;</div><div class="line">&lt;item android:state_pressed="true" android:drawable="@mipmap/clear_pressed" /&gt;</div><div class="line">&lt;item android:drawable="@mipmap/clear_normal" /&gt;</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure>
<h2 id="新建自定义EditText"><a href="#新建自定义EditText" class="headerlink" title="新建自定义EditText"></a>新建<strong>自定义EditText</strong></h2><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>view构造函数最多含有4个参数，以前一直没有涉猎，这次借助这个机会我们要好好理解一下了。</p>
<ul>
<li>Context context :上下文，这个没什么好说的</li>
<li>AttributeSet attrs：这是一个我们自定义attr的set集合，里面包含着我们在xml中定义的属性值</li>
<li>int defStyleAttr：这个默认传入的attr参数，在这里是R.attr.editTextStyle</li>
<li>int defStyleRes:默认的Res的id，一般不传的话都赋值为0</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CodoEditText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line"><span class="keyword">this</span>(context, attrs,android.R.attr.editTextStyle);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CodoEditText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line"><span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">mTa = context.obtainStyledAttributes(attrs, R.styleable.CodoEditText);</div><div class="line">mType = mTa.getInt(R.styleable.CodoEditText_funtype,-<span class="number">1</span>); </div><div class="line">init();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们借助3参数的构造函数来完成我们的EditText,通过context.obtainStyledAttributes()方法我们能获取到xml上定义以及系统默认定义的所有参数。具体就是通过TypedArrayd的getter方法，如上图中的mType获取的就是type的枚举值。</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>之后我们执行的是init()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**左上右下-0123*/</span></div><div class="line">mLeftDrawable = getCompoundDrawables()[<span class="number">0</span>];</div><div class="line">mRightDrawable = getCompoundDrawables()[<span class="number">2</span>];</div><div class="line"><span class="comment">/**对左右图片进行初始化设置*/</span></div><div class="line"><span class="keyword">if</span>(mRightDrawable == <span class="keyword">null</span>)&#123;</div><div class="line"><span class="keyword">if</span>(mType == TYPE_CLEAR)&#123;</div><div class="line">mRightDrawable = mTa.getResources().getDrawable(R.drawable.selector);</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (mType == TYPE_PWD_EXPLODE)&#123;</div><div class="line">mRightDrawable = getResources().getDrawable(mEyeCloseResID);</div><div class="line">mEyeOpenDrawable = getResources().getDrawable(mEyeOpenResID);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这一步是对左右图片进行的初始化，获取图片是getCompoundDrawables()这是一个集合 含的是左上右下4个位置。与之对应的setCompoundDrawables()是设置图片，并且该方法内部自行调用了invalided()，所以很方便我们动态更换图片。这也就为之后的图片可见以及密码明文暗文切换功能提供了一个思路。另外一个思路是设置alpha值。</p>
<h3 id="图片大小设置"><a href="#图片大小设置" class="headerlink" title="图片大小设置"></a>图片大小设置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(mLeftDrawable!=<span class="keyword">null</span>)&#123;</div><div class="line"><span class="comment">//获取设定的左边图片高度，设置默认高度为右图的高度</span></div><div class="line">mLeftDrawableHeight = mTa.getDimensionPixelOffset(R.styleable.CodoEditText_leftDrawableHeight,mRightDrawable.getIntrinsicHeight());</div><div class="line">mLeftDrawableWidth = mTa.getDimensionPixelOffset(R.styleable.CodoEditText_leftDrawableWidth,mRightDrawable.getIntrinsicWidth());</div><div class="line">mLeftDrawable.setBounds(<span class="number">0</span>,<span class="number">0</span>,mLeftDrawableWidth,mLeftDrawableHeight);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span>(mRightDrawable!=<span class="keyword">null</span>)&#123;</div><div class="line">mRightDrawableHeight = mTa.getDimensionPixelOffset(R.styleable.CodoEditText_rightDrawableHeight,mRightDrawable.getIntrinsicHeight());</div><div class="line">mRighttDrawableWidth = mTa.getDimensionPixelOffset(R.styleable.CodoEditText_rightDrawableWidth,mRightDrawable.getIntrinsicWidth());</div><div class="line">mRightDrawable.setBounds(<span class="number">0</span>,<span class="number">0</span>,mRighttDrawableWidth,mRightDrawableHeight);</div><div class="line"><span class="keyword">if</span>(mEyeOpenDrawable!=<span class="keyword">null</span>)&#123;</div><div class="line">mEyeOpenDrawable.setBounds(<span class="number">0</span>,<span class="number">0</span>,mRighttDrawableWidth,mRightDrawableHeight);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里主要的几个方法获取尺寸的方法我们来区别一下</p>
<blockquote>
<ul>
<li>getDimensionPixelOffset()</li>
<li>getDimension()</li>
<li>getLayoutDimension()</li>
<li>getDimensionPixelSize()</li>
</ul>
</blockquote>
<p>根据源码的描述</p>
<blockquote>
<p>方法1:Retrieve a dimensional unit attribute at index for use as an offset in raw pixels.This is the same as{@link #getDimension}, except the returned value is converted to integer pixels for you</p>
<p>方法2：Retrieve a dimensional unit attribute at <var>index</var>. Unit<br>conversions are based on the current {@link DisplayMetrics}<br>associated with the resources this {@link TypedArray} object<br>came from.</p>
<p>方法3：Special version of {@link #getDimensionPixelSize} for retrieving<br>{@link android.view.ViewGroup}’s layout_width and layout_height<br>attributes.  This is only here for performance reasons; applications<br>should use {@link #getDimensionPixelSize}.</p>
<p>方法4：Retrieve a dimensional unit attribute at <var>index</var> for use<br>as a size in raw pixels.  This is the same as<br>{@link #getDimension}, except the returned value is converted to<br>integer pixels for use as a size.  A size conversion involves<br>rounding the base value, and ensuring that a non-zero base value<br>is at least one pixel in size.</p>
</blockquote>
<p>我们可以发现！方法3获取的是viewgourp的demension所以这个就不需要多讲了！</p>
<p>方法1.2.4其实获取的都是同一个dimension只是最后表示的方式各不相同。<br>方法2是直接获取float值<br>而方法1跟4都是获取的原生的像素值，取整。取整的方式各不相同而已，方法4是四舍五入然后保证非0。</p>
<h3 id="点击事件范围获取"><a href="#点击事件范围获取" class="headerlink" title="点击事件范围获取"></a>点击事件范围获取</h3><p>在EditText内部是有onTouchEvent(）方法的，我们只需要去新定义我们图片范围内响应的事件即可，那么很简单的知道在EditText内部x的范围是图片左侧到图片右侧，y的范围可以简单的直接用EditText内部即可。</p>
<p>图片左侧x：getWidth()-getTotalPaddingRight()<br>图片右侧x：getWidth()-getPaddingRight()</p>
<p>这里出现了TotalPaddingRigth与getPaddingRight，我们就扩展开引入下整个View内部测量的知识体系方便以后。</p>
<p>首先是viewgroup内部各种距离的定义：<br><img src="http://omizc9kwk.bkt.clouddn.com/86F100A7-4A40-4EFF-86A0-93AD1399383C.png" alt="View gourp"></p>
<p>然后就是TextView内部各个padding的定义函数：</p>
<blockquote>
<ul>
<li>getWidth(), getHeight()</li>
<li>getPaddingLeft/Right/Top/Bottom()</li>
<li>getCompoundPaddingLeft/Right/Top/Bottom()</li>
<li>getExtendedPaddingBottom/Top()</li>
<li>getTotalPaddingLeft/Right/Top/Bottom()   </li>
</ul>
</blockquote>
<p><img src="http://omizc9kwk.bkt.clouddn.com/7E87D2E0-8FB7-4127-AAF9-2D324F96DF2D.png" alt="TextView"></p>
<p>最后偷来的计算Text内部字符各种长度用到的方法</p>
<blockquote>
<h4 id="获取整段文字的长度"><a href="#获取整段文字的长度" class="headerlink" title="获取整段文字的长度"></a>获取整段文字的长度</h4><blockquote>
<ul>
<li>TextView.getPaint().measureText(String text)<h4 id="获取任意行的长度"><a href="#获取任意行的长度" class="headerlink" title="获取任意行的长度"></a>获取任意行的长度</h4></li>
<li>TextView.getLayout().getLineCount()</li>
<li>TextView.getLayout().getLineWidth(int line)<h4 id="跑马灯配置4必要条件"><a href="#跑马灯配置4必要条件" class="headerlink" title="跑马灯配置4必要条件"></a>跑马灯配置4必要条件</h4></li>
<li>android:ellipsize=”marquee”</li>
<li>android:singleLine=”true”</li>
<li>android:focusable=”true”</li>
<li>android:marqueeRepeatLimit=”-1”//-1表示无限次     </li>
</ul>
</blockquote>
</blockquote>
<h3 id="点击事件"><a href="#点击事件" class="headerlink" title="点击事件"></a>点击事件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</div><div class="line"><span class="keyword">int</span> x;</div><div class="line"><span class="keyword">if</span>(event.getAction()== MotionEvent.ACTION_UP)&#123;</div><div class="line"><span class="keyword">if</span>(mRightDrawable!=<span class="keyword">null</span>)&#123;</div><div class="line">x = (<span class="keyword">int</span>) event.getX();</div><div class="line"><span class="keyword">if</span>(x&lt;getWidth()-getPaddingRight()&amp;&amp;x&gt;getWidth()-getTotalPaddingRight())&#123;</div><div class="line"><span class="keyword">if</span>(mType==TYPE_CLEAR)&#123;</div><div class="line"><span class="keyword">this</span>.setText(<span class="string">""</span>);</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(mType==TYPE_PWD_EXPLODE)&#123;</div><div class="line"><span class="keyword">if</span>(isEyeOpen)&#123;</div><div class="line"><span class="keyword">this</span>.setTransformationMethod(PasswordTransformationMethod.getInstance());</div><div class="line">isEyeOpen = <span class="keyword">false</span>;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line"><span class="keyword">this</span>.setTransformationMethod(HideReturnsTransformationMethod.getInstance());</div><div class="line">isEyeOpen = <span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line">switchEyeIcon();</div><div class="line">&#125;</div><div class="line"><span class="comment">//TODO 监听自定义其他的回调咯</span></div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这就特别简单了，就不多交代什么了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/08/Hexo建站学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Amberkira Yunnel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Amberkira">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/08/Hexo建站学习/" itemprop="url">
                  “Hexo建站学习”
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-08T17:08:13+08:00">
                2017-03-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="需要准备"><a href="#需要准备" class="headerlink" title="需要准备"></a>需要准备</h2><ul>
<li>node.js  </li>
<li>git  </li>
<li>github</li>
</ul>
<h2 id="着手准备"><a href="#着手准备" class="headerlink" title="着手准备"></a>着手准备</h2><p>  1.首先<a href="https://nodejs.org/en/" target="_blank" rel="external">node.js</a>下载获取必备工具<strong>npm</strong>(不建议使用cnpm，阿里镜像下的hexo包可能不全)。  </p>
<p>  2.获取git:Xcode自带git，这部分只需要配置好即可。  </p>
<p>  3.创建<a href="https://github.com" target="_blank" rel="external">github</a>账号，新建repo，名字格式必须为:<strong>账号+”.github.io”</strong>。</p>
<h2 id="使用npm"><a href="#使用npm" class="headerlink" title="使用npm"></a>使用npm</h2><p><em>使用npm中遇到的问题是最多的，我们最后是依照<a href="https://hexo.io" target="_blank" rel="external">Hexo官网</a>的说明完成了其中一部分命令行的键入.</em>  </p>
<p><code>$ sudo npm install hexo-cli -g</code>  </p>
<p>请注意命令中的<strong>sudo</strong>是必备的，mac上会要求键入用户软件安装密码，参照官网的话npm会返回dwrat错误信息。</p>
<p><code>$ hexo init &lt;folder&gt;</code>  </p>
<p>这一步最早也是报错，是因为这个init命令 在没有folder指定情况下是直接在～目录下创建，mac里这部分指代的路径一般都是用户根目录，hexo不能在非空文件夹下引入配置。所以new folder就能解决问题。  </p>
<p><code>$ cd &lt;folder&gt;</code>  </p>
<p>  现在让我们进入上一步进行初始化的folder内，当然这也是以后需要与github仓库绑定的文件夹。下一步你就会明白了 。  </p>
<p><code>$ npm install</code> </p>
<p>  该命令的顺利执行会帮助你引入六个文件 通过ls命令我们可以查到是否完整引入。他们的作用会在待会儿正确配置好小站后慢慢给大家道来。  </p>
<p>  <code>$ vim _config.yml</code> </p>
<p>  接下来就让我们来配置_config文件，这步是为了将你的blog与github库相关联。需要对_config.yml进行一部分修改，通过vim打开文件后，按i进入插入模式，滑动到最下方deploy部分，最初代码应该是需要更改为这一步需要注意的是请不要少或多一个空格，否则下一步命令的时候会报bad indentationd错误。  </p>
<p><code>$ npm install hexo-deployer-git --save</code>  </p>
<p>  这一步是帮助hexo通过git来部署我们的项目。  </p>
<p><code>$ hexo new &quot;title&quot;</code></p>
<p><code>$ hexo g</code></p>
<p> <code>$ hexo d</code>  </p>
<p>  终于可以使用Hexo最出名的三步走动作了，这一系列动作完成从创建新文章md文件到生成静态网页到最后push到github托管等一系列操作。  </p>
<p><code>$ hexo server</code>  </p>
<p>  当然如果不打算着急发布的同学们不需要执行最后一步d命令，而是通过server命令能够在localhost：4000端口提前预览网页内容，进行调整之后发布。</p>
<h2 id="Hexo文件讲解"><a href="#Hexo文件讲解" class="headerlink" title="Hexo文件讲解"></a>Hexo文件讲解</h2><p>在hexo为我们提供了很方便搭建框架的同时，如果我们需要进行更多自定义的动作时候，我们也不妨花点时间来对其进行深入点的了解。以下的内容基本都是基于hexo官方说明的翻译，如果有不到位的地方还请大神斧正。</p>
<p>  回顾之前我们在blog相关的folder中执行完<strong>$ npm install</strong>后，获取到的几个文件如下:</p>
<ul>
<li>_config.yml</li>
<li>package.json</li>
<li>scaffolds</li>
<li>source</li>
<li>themes  </li>
</ul>
<h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h3><p>  用于配制自己站点绝大部分设置的文件。</p>
<p> SITE</p>
<table>
<thead>
<tr>
<th style="text-align:left">设置</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">title</td>
<td style="text-align:left">网站的标题</td>
</tr>
<tr>
<td style="text-align:left">subtitle</td>
<td style="text-align:left">网站的副标题</td>
</tr>
<tr>
<td style="text-align:left">description</td>
<td style="text-align:left">网站的描述</td>
</tr>
<tr>
<td style="text-align:left">author</td>
<td style="text-align:left">你的名字（误）</td>
</tr>
<tr>
<td style="text-align:left">language</td>
<td style="text-align:left">网站语言，请使用符合ISO-639-1的两字母代码，默认是en,你也可以<a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" target="_blank" rel="external">点此</a>获取更多国家的代码</td>
</tr>
<tr>
<td style="text-align:left">timezone</td>
<td style="text-align:left">网站时区，默认是获取您计算机的当前时区，你可以<a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="external">点此</a>获取更多的时区表  </td>
</tr>
</tbody>
</table>
<p> URL</p>
<table>
<thead>
<tr>
<th style="text-align:left">设置</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">url</td>
<td style="text-align:left">设置网站的url地址</td>
</tr>
<tr>
<td style="text-align:left">root</td>
<td style="text-align:left">设置网站文档的根目录</td>
</tr>
<tr>
<td style="text-align:left">permalink</td>
<td style="text-align:left">设置文章的静态链接格式<a href="https://hexo.io/docs/permalinks.html" target="_blank" rel="external">参考</a></td>
</tr>
<tr>
<td style="text-align:left">permalink_defaults</td>
<td style="text-align:left">设置静态链接中每个字段的默认值</td>
</tr>
</tbody>
</table>
<p>  还有其他很多设置的<a href="https://hexo.io/docs/configuration.html" target="_blank" rel="external">选项</a></p>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>  应用数据，EJS,Stylus,Markdown 的渲染引擎是默认安装的。</p>
<h3 id="scaffolds"><a href="#scaffolds" class="headerlink" title="scaffolds"></a>scaffolds</h3><p>  脚手架，Hexo是基于脚手架内的新文件来帮你创建新post的。</p>
<h3 id="source"><a href="#source" class="headerlink" title="source"></a>source</h3><p>  该文件夹用于放置你站点内容的，hexo会忽略到该文件夹下的隐藏文件或除了<em>post以外的所有名称前缀是“</em>”的文件。用于渲染的文件（如Markdown,html）是会被执行并且放置在public文件夹内，而其他文件只会被复制而已。</p>
<h3 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h3><p>theme文件夹。Hexo会将站点内容与themes文件相结合来生成静态网页。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Amberkira Yunnel" />
          <p class="site-author-name" itemprop="name">Amberkira Yunnel</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Amberkira Yunnel</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  






  





  

  

  

  

</body>
</html>
